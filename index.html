<!DOCTYPE html>
<html>
	<head>
		<title> Tic-Tac-Toe </title>
		<script src="https://code.jquery.com/jquery-2.2.1.min.js"></script>
		<link rel="stylesheet" type="text/css" href="style.css">

	</head>
	<body>
	<table id="board">
		<tbody>
			<tr>
				<td id="0-0"><span class="letter"></span></td>
				<td id="0-1"><span class="letter"></span></td>
				<td id="0-2"><span class="letter"></span></td>
			</tr>
			<tr>
				<td id="1-0"><span class="letter"></span></td>
				<td id="1-1"><span class="letter"></span></td>
				<td id="1-2"><span class="letter"></span></td>
			</tr>
			<tr>
				<td id="2-0"><span class="letter"></span></td>
				<td id="2-1"><span class="letter"></span></td>
				<td id="2-2"><span class="letter"></span></td>
			</tr>
		</tbody>

	</table>
	<p id="gameMessage"></p>


		<script>
			//board size
			var n = 3;

			var whichTurn = 0;


			$("td").click(function() {
				var letter = this.getElementsByTagName("span")[0];
				var square = this.id;
				//console.log(this.id);
				if(letter.innerHTML === '') {
					//console.log(whichTurn);
					if((whichTurn % 2 === 0) && (letter.used === (false || undefined))) {
						letter.innerHTML = 'X';
						testForVictory(square.split('-'), 'X');
						
					} else {
						letter.innerHTML = 'O';
						testForVictory(square.split('-'), 'O');
					}
					letter.used = true
					if(whichTurn === 8) {

						$("#gameMessage").html("Game Over!");
					} else {
						whichTurn++;
					};
					

				};
			});


			function testForVictory(start, symbol) {
				start = start.map(Number)
				// check columns
				for(var i = 0; i < n; i++) {
					if(getSymbol([start[0], i]) === symbol) {
						if(i === n-1) {
							
							$("#gameMessage").html(symbol + "'s win!</br>Game Over!");
							return;
						}
					} else {
						break;
					}
				}
				// check rows
				for(var i = 0; i < n; i++) {
					if(getSymbol([i, start[1]]) === symbol) {
						if(i === n-1) {
							
							$("#gameMessage").html(symbol + "'s win!</br>Game Over!");
							return;
						}
					} else {
						break;
					}
				}
				// check diagonal
				for(var i = 0; i < n; i++) {
					if(getSymbol([i, i]) === symbol) {
						if(i === n-1) {
							
							$("#gameMessage").html(symbol + "'s win!</br>Game Over!");
							return;
						}
					} else {
						break;
					}
				}
				// check reverse diagonal
				for(var i = 0; i < n; i++) {
					if(getSymbol([i, (n-1)-i]) === symbol) {
						if(i === n-1) {
							
							$("#gameMessage").html(symbol + "'s win!</br>Game Over!");
							return;
						}
					} else {
						break;
					}
				}						
			};


			function getSymbol(start) {
				return $("#"+start.join('-')).find(".letter")[0].innerHTML;
			};
		</script>

	</body>


</html>